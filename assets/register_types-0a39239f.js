import{serializable as n,Behaviour as d,GameObject as u,Collider as b,BoxCollider as m,Rigidbody as f,TypeStore as g}from"./needle-engine-47755b98.js";import{V as p}from"./three.module-f305cb49.js";import"./index-2cafedee.js";var y=Object.defineProperty,P=Object.getOwnPropertyDescriptor,a=(l,i,s,r)=>{for(var t=r>1?void 0:r?P(i,s):i,c=l.length-1,e;c>=0;c--)(e=l[c])&&(t=(r?e(i,s,t):e(t))||t);return r&&t&&y(i,s,t),t};class o extends d{constructor(){super(...arguments),this.brickPrefabs=[],this.numberOfBricks=10,this.center=null,this.radius=5,this.pullStrength=.2,this.snapDistance=.5,this.jitterStrength=.05,this.pushstrength=.2,this.bricks=[]}async start(){for(let i=0;i<this.numberOfBricks;i++){const s=this.brickPrefabs[Math.floor(Math.random()*this.brickPrefabs.length)],r=new p().setFromSphericalCoords(this.radius,Math.random()*Math.PI*2,Math.random()*Math.PI).add(this.center.position),t=u.instantiate(s,{position:r});let c=t.getComponent(b);c||(c=t.addComponent(m));const e=t.getComponent(f);e&&(e.useGravity=!1),this.bricks.push(t),e&&e.setVelocity(new p(0,0,0)),e&&(e.angularDrag=2)}}update(){var i;for(const s of this.bricks){const r=s.getComponent(f);if(!r)continue;const t=this.center.position.clone().sub(s.position).normalize();if(this.center.position.distanceTo(s.position)>this.snapDistance)r.applyForce(t.multiplyScalar(this.pullStrength));else{r.setVelocity(new p(0,0,0));const h=new p((Math.random()-.5)*this.jitterStrength,(Math.random()-.5)*this.jitterStrength,(Math.random()-.5)*this.jitterStrength);r.setVelocity(h)}const e=this.context.input.getPointerPosition(0);if(e){const h=(i=this.context.physics.engine)==null?void 0:i.raycast(e);h&&h.collider.gameObject===s&&r.applyForce(new p(0,0,this.pushstrength))}}}}a([n()],o.prototype,"brickPrefabs",2);a([n()],o.prototype,"numberOfBricks",2);a([n()],o.prototype,"center",2);a([n()],o.prototype,"radius",2);a([n()],o.prototype,"pullStrength",2);a([n()],o.prototype,"snapDistance",2);a([n()],o.prototype,"jitterStrength",2);a([n()],o.prototype,"pushstrength",2);g.add("BricksSpawners",o);
